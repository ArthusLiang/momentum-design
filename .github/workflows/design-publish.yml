on:
  schedule:
    # runs on 1:01  17:01 UTC
    - cron:  '01 1,13 * * *'
name: Publish To NPM
jobs:
  jobAutomation:
    name: Publish to npmjs
    runs-on: ubuntu-latest
    if: ${{ github.repository_owner == 'momentum-design' }}
    steps:
    - name: Check out
      uses: actions/checkout@v3
      with:
          fetch-depth: 2
    - name: Install Yarn
      run: yarn
    - name: Install Package and Build
      run: yarn workspace @momentum-design/momentum-automation-center init-build
    - name: Test release data
      run: yarn workspace @momentum-design/momentum-automation-center test
    # remove remark after moving full work
    # - name: Publish 
    #  run: yarn workspace @momentum-design/momentum-automation-center publish-abstract tokenWebex=${{ secrets.WEBEX_TOKEN }} tokenNpm=${{ secrets.NPM_TOKEN }}
      